<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload to R2</title>
</head>
<body>
<h2>Upload File to Cloudflare R2</h2>
<form id="uploadForm">
  <input type="file" name="file" required>
  <button type="submit">Upload</button>
</form>
<div id="result"></div>

<script>
const form = document.getElementById('uploadForm');
const result = document.getElementById('result');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const file = form.file.files[0];
  if (!file) return;

  const formData = new FormData();
  formData.append('file', file);

  const res = await fetch('/upload', {
    method: 'POST',
    body: formData
  });

  const data = await res.json();
  if (res.ok) {
    result.innerHTML = `<p>Upload successful! <a href="${data.url}" target="_blank">View file</a></p>`;
  } else {
    result.innerText = 'Upload failed!';
  }
});
</script>
</body>
</html>
